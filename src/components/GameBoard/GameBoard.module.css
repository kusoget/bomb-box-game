.gameBoard {
    display: grid;
    grid-template-columns: 1fr 320px;
    grid-template-rows: auto 1fr;
    /* Header, Main/Side */
    gap: 20px;
    height: 100vh;
    padding: 20px;
    background: var(--bg-primary);
    /* Polka dot or cream */
}

.header {
    grid-column: 1 / -1;
}



.mainArea {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0;
    min-height: 0;
    border-radius: var(--border-radius-lg);
    /* Sticky header needs visible overflow usually, ensuring sticky context works */
    border: var(--border-main);
    box-shadow: var(--shadow-pop);
    transition: all 0.5s var(--transition-bouncy);
    background: var(--bg-card);
}

/* Player 1 Turn Theme (Purple) */
.mainArea.turnPlayer1 {
    background: var(--pop-purple);
    border-color: var(--text-primary);
    box-shadow: 8px 8px 0px 0px var(--text-primary);
}

/* Player 2 Turn Theme (Orange) */
.mainArea.turnPlayer2 {
    background: var(--pop-orange);
    border-color: var(--text-primary);
    box-shadow: 8px 8px 0px 0px var(--text-primary);
}

.gameArea {
    flex: 1;
    position: relative;
    background: transparent;
    /* Transparent to show mainArea theme */
    padding: 20px;
    min-height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    /* Border removed as it's now on mainArea */
    border: none;
    border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
}

.gameContainer {
    position: relative;
    width: 100%;
    max-width: 380px;
    /* スマートフォンサイズに合わせて固定 */
    aspect-ratio: 1;
    /* margin: 0 auto; flex配置するので不要だが念のため */
}

.sidebar {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.chatWrapper {
    flex: 1;
    min-height: 300px;
    border: var(--border-main);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-pop);
    background: var(--bg-card);
    overflow: hidden;
}

.phaseLabel {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin-bottom: 8px;
}

.phaseText {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--neon-cyan);
    margin-bottom: 8px;
    /* ラベル削除に伴い調整 */
    text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
}

/* Text Colors needs adjusting for dark backgrounds in Turn modes? 
   No, PhaseHeader handles text. GameArea content handles itself. 
   We might need to pass context to children if text needs to flip to white. */

.textPlayer1 {
    color: var(--pop-purple);
    font-weight: 800;
}

.textPlayer2 {
    color: var(--pop-orange);
    font-weight: 800;
}

.actionButton {
    width: 100%;
}

.instruction {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 12px;
    line-height: 1.5;
}

.waitingMessage {
    font-size: 1rem;
    color: var(--text-muted);
    animation: pulse 2s infinite;
}

/* ローディング */
.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.5rem;
    color: var(--neon-cyan);
}

.loadingSpinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--bg-tertiary);
    border-top-color: var(--neon-cyan);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 16px;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* レスポンシブ */
@media (max-width: 900px) {
    .gameBoard {
        display: flex;
        /* Switch to flex on mobile for simpler stacking */
        flex-direction: column;
        height: auto;
        min-height: 100vh;
        overflow-y: auto;
    }

    .sidebar {
        grid-row: auto;
    }

    .chatWrapper {
        max-height: 250px;
    }

    .gameBoard {
        padding: 10px;
        gap: 16px;
    }

    .gameArea {
        min-height: 320px;
        padding: 10px;
    }

    .actionPanel {
        padding: 16px;
    }

    .phaseText {
        font-size: 1rem;
    }

    .instruction {
        font-size: 0.8rem;
    }
}