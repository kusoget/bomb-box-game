.gameBoard {
    display: grid;
    grid-template-columns: 1fr 320px;
    grid-template-rows: auto 1fr;
    /* Header, Main/Side */
    gap: 0;
    height: 100vh;
    padding: 0;
    /* Full bleed everywhere */
    background: var(--bg-primary);
    /* Polka dot or cream */
}

.header {
    grid-column: 1 / -1;
}



.mainArea {
    position: relative;
    display: flex;
    flex-direction: column;
    flex: 1;
    /* Maximizes height */
    gap: 0;
    width: 100%;

    /* Removed Card Styling for Full Width */
    background: transparent;
    border: none;
    box-shadow: none;
    border-radius: 0;
    transition: background-color 0.5s ease;
}

/* Player 1 Turn Theme (Purple Background) */
.mainArea.turnPlayer1 {
    background-color: var(--pop-purple);
}

/* Player 2 Turn Theme (Orange Background) */
.mainArea.turnPlayer2 {
    background-color: var(--pop-orange);
}

.gameArea {
    flex: 1;
    position: relative;
    background: transparent;
    padding: 20px 0;
    /* Reduced horizontal padding */
    display: flex;
    align-items: center;
    justify-content: center;
    /* Removed overflow: hidden to allow natural scroll if content is long */
}

.gameContainer {
    position: relative;
    width: 100%;
    max-width: 400px;
    /* Slightly wider */
    aspect-ratio: 1;
    margin: 0 auto;
}

.sidebar {
    display: flex;
    flex-direction: column;
    gap: 20px;
    pointer-events: none;
    /* Let clicks pass through, chat has pointer-events: auto */
}

/* Chat is now floating, managed by Chat component itself */
.chatWrapper {
    display: none;
    /* Hide legacy wrapper if it exists in DOM */
}

.phaseLabel {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin-bottom: 8px;
}

.phaseText {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--neon-cyan);
    margin-bottom: 8px;
    /* ラベル削除に伴い調整 */
    text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
}

/* Text Colors needs adjusting for dark backgrounds in Turn modes? 
   No, PhaseHeader handles text. GameArea content handles itself. 
   We might need to pass context to children if text needs to flip to white. */

.textPlayer1 {
    color: var(--pop-purple);
    font-weight: 800;
}

.textPlayer2 {
    color: var(--pop-orange);
    font-weight: 800;
}

.actionButton {
    width: 100%;
}

.instruction {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 12px;
    line-height: 1.5;
}

.waitingMessage {
    font-size: 1rem;
    color: var(--text-muted);
    animation: pulse 2s infinite;
}

/* ローディング */
.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.5rem;
    color: var(--neon-cyan);
}

.loadingSpinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--bg-tertiary);
    border-top-color: var(--neon-cyan);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 16px;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Fixed Footer for Actions */
.gameFooter {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 16px;
    background: var(--bg-secondary);
    border-top: 3px solid var(--text-primary);
    display: flex;
    justify-content: center;
    z-index: 900;
    /* Above chat FAB but below overlays */
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
}

.footerButton {
    width: 100%;
    max-width: 400px;
    /* Limit width on tablets */
    padding: 18px 24px;
    font-size: 1.2rem;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: var(--border-radius);
    border: 3px solid var(--text-primary);
    box-shadow: 4px 4px 0 var(--text-primary);
    background: var(--pop-purple);
    color: #fff;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.footerButton:active:not(:disabled) {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0 var(--text-primary);
}

.footerButton.danger {
    background: var(--pop-red);
}

.footerButton:disabled {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border-color: var(--text-secondary);
    box-shadow: none;
    cursor: not-allowed;
    transform: none;
}

/* Make space for footer in main content */
.gameBoard {
    padding-bottom: 90px;
}

/* レスポンシブ */
@media (max-width: 900px) {
    .gameBoard {
        display: flex;
        /* Switch to flex on mobile for simpler stacking */
        flex-direction: column;
        height: auto;
        min-height: 100vh;
        overflow-y: auto;
        padding: 0;
        gap: 0;
    }

    .sidebar {
        grid-row: auto;
    }

    .chatWrapper {
        max-height: 250px;
    }

    /* Deleted duplicate .gameBoard block */

    .gameArea {
        min-height: 320px;
        padding: 10px;
    }

    .actionPanel {
        padding: 16px;
    }

    .phaseText {
        font-size: 1rem;
    }

    .instruction {
        font-size: 0.8rem;
    }
}